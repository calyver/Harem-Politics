doctrine_marriage_type = {
	group = "marriage"

	#Vanilla doctrines
	doctrine_monogamy = {
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_monogamy }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						OR = {
							has_doctrine = doctrine_polygamy
							has_doctrine = doctrine_polygamy_4
						}
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step #Check 0.5
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_5
						
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_step #Check 1
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_10
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step #Check 1.5
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_25
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step #Check 2
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_50
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step #Check 2.5
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_75
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step #Check 3
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_polygamy_100
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step #Check 3.5
			}
		}
		parameters = {
			number_of_spouses = 1
			marriage_event = yes #Check
		}
	}

	doctrine_polygamy = {
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_polygamy }
				multiply = faith_unchanged_doctrine_cost_mult
			}
		}
		parameters = {
			number_of_spouses = 4
			spouse_piety_loss = yes
		}
	}

	doctrine_concubines = {
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines }
				multiply = faith_unchanged_doctrine_cost_mult
			}
		}
		parameters = {
			number_of_spouses = 1
			number_of_consorts = 3
		}
	}
}

doctrine_concubinage_type = {
	group = "marriage"
	doctrine_concubines_0 = {
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_0 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_2
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
						
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			#number_of_consorts = 0
			number_of_consorts_zero_loc = yes
		}
	}
	doctrine_concubines_1 = {
		is_shown = {
			OR = {
				has_game_rule = khd_allowed_doctrines_granular
				has_game_rule = khd_allowed_doctrines_harem
			}
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_1 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			OR = { 
			#				has_doctrine = doctrine_concubines
			#				has_doctrine = doctrine_concubines_3
			#			}	
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
						
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			number_of_consorts = 1
			allows_concubinage = yes
			allows_royal_concubine_prestige_penalty_offset = yes
			allows_imperial_concubine_prestige_penalty_offset = yes
		}
	}
	doctrine_concubines_2 = {
		is_shown = {
			OR = {
				has_game_rule = khd_allowed_doctrines_granular
				has_game_rule = khd_allowed_doctrines_harem
			}
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_2 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_7
			#			has_doctrine = doctrine_concubines_0
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
						
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			number_of_consorts = 2
			allows_concubinage = yes
			allows_imperial_concubine_prestige_penalty_offset = yes
		}
	}
	
	doctrine_concubines_3 = {
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { 
					OR = { 
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
						has_doctrine = doctrine_concubines_3
					}
				}
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_11
			#			has_doctrine = doctrine_concubines_1
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
						
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
		}
		parameters = {
			number_of_consorts = 3
			allows_concubinage = yes
		}
	}	

	doctrine_concubines_7 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine =doctrine_concubines_7 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_15
			#			has_doctrine = doctrine_concubines_2
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
		}
		parameters = {
			number_of_consorts = 7
			allows_concubinage = yes
		}
	}

	doctrine_concubines_11 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_11 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_23
			#			OR = { 
			#				has_doctrine = doctrine_concubines
			#				has_doctrine = doctrine_concubines_3
			#			}	
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
		}
		parameters = {
			number_of_consorts = 11
			allows_concubinage = yes
		}
	}
	
	doctrine_concubines_15 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_15 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_31
			#			has_doctrine = doctrine_concubines_7
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
		}
		parameters = {
			number_of_consorts = 15
			allows_concubinage = yes
		}
	}

	doctrine_concubines_23 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_23 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_47
			#			has_doctrine = doctrine_concubines_11
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
		}
		parameters = {
			number_of_consorts = 23
			allows_concubinage = yes
		}
	}
	
	doctrine_concubines_31 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_31 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_63
			#			has_doctrine = doctrine_concubines_15
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
		}
		parameters = {
			number_of_consorts = 31
			allows_concubinage = yes
		}
	}

	doctrine_concubines_47 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_47 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_63
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_95
			#			has_doctrine = doctrine_concubines_23
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
		}
		parameters = {
			number_of_consorts = 47
			allows_concubinage = yes
		}
	}	

	doctrine_concubines_63 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_63 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_127
			#			has_doctrine = doctrine_concubines_31
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			number_of_consorts = 63
			allows_concubinage = yes
		}
	}

	doctrine_concubines_95 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_95 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_127
						has_doctrine = doctrine_concubines_63
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_47
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			number_of_consorts = 95
			allows_concubinage = yes
		}
	}

	doctrine_concubines_127 = {
		is_shown = {
				has_game_rule = khd_allowed_doctrines_harem
		}
		can_pick = {
			custom_description = {
				text = doctrine_not_both_polygamy_and_concubinage
				OR = {
					has_game_rule = khd_combine_polygamy_concubines_allowed
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_mid
			if = {
				limit = { has_doctrine = doctrine_concubines_127 }
				multiply = faith_unchanged_doctrine_cost_mult
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_95
					}
				}
				multiply = faith_changed_doctrine_cost_mult_point_five_step
			}
			#if = {
			#	limit = { 
			#		OR = {
			#			has_doctrine = doctrine_concubines_63
			#		}
			#	}
			#	multiply = faith_changed_doctrine_cost_mult_one_step
			#}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_47
					}
				}
				multiply = faith_changed_doctrine_cost_mult_one_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_31
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_23
					}
				}
				multiply = faith_changed_doctrine_cost_mult_two_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_15
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_11
					}
				}
				multiply = faith_changed_doctrine_cost_mult_three_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_7
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_step
			}
			if = {
				limit = { 
					OR = {
						OR = { 
							has_doctrine = doctrine_concubines
							has_doctrine = doctrine_concubines_3
						}	
					}
				}
				multiply = faith_changed_doctrine_cost_mult_four_point_five_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_2
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_1
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
			if = {
				limit = { 
					OR = {
						has_doctrine = doctrine_concubines_0
					}
				}
				multiply = faith_changed_doctrine_cost_mult_five_plus_step
			}
		}
		parameters = {
			number_of_consorts = 127
			allows_concubinage = yes
		}
	}

}

doctrine_marriage_realm_celebration = {
	group = "marriage"
	doctrine_marriage_realm_celebration_disallowed = {
		can_pick = {
			custom_description = {
				text = doctrine_only_polygamy_or_concubinage_may_disallow
				OR = {
					NOT = {
						AND = {
							doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
							doctrine:doctrine_concubines_0 = { is_in_list = selected_doctrines }
						}
					}
					has_game_rule = khd_marriage_celebration_flexible 
				}
			}
		}
		piety_cost = {
			value = faith_doctrine_cost_low
			if = {
				limit = { has_doctrine = doctrine_marriage_realm_celebration_disallowed }
				multiply = faith_unchanged_doctrine_cost_mult
			}
		}
	}
	doctrine_marriage_realm_celebration_first = {
		can_pick = {
			custom_description = {
				text = doctrine_polygamy_or_concubinage_may_not_celebrate
				OR = {
					AND = {
						doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
						doctrine:doctrine_concubines_0 = { is_in_list = selected_doctrines }
					}
					has_game_rule = khd_marriage_celebration_flexible 
				}
			}
		}
		piety_cost = {
			if = {
				limit = { #Monogamy
					doctrine:doctrine_monogamy = { is_in_list = selected_doctrines }
					doctrine:doctrine_concubines_0 = { is_in_list = selected_doctrines }
				}
				value = faith_doctrine_cost_low
			}
			else_if = {
				limit = { #Both
					NOT = { doctrine:doctrine_monogamy = { is_in_list = selected_doctrines } }
					NOT = { doctrine:doctrine_concubines_0 = { is_in_list = selected_doctrines } }
				}
				value = faith_doctrine_cost_massive
			} 
			else_if = {
				limit = { #Polygamy
					NOT = { doctrine:doctrine_monogamy = { is_in_list = selected_doctrines } }
				}
				value = faith_doctrine_cost_high
			}
			else = { #Concubinage
				value = faith_doctrine_cost_mid
			}
			if = {
				limit = { has_doctrine = doctrine_marriage_realm_celebration_first }
				multiply = faith_unchanged_doctrine_cost_mult
			}
		}
		parameters = {
			marriage_event = yes
		}
	}
}