#Demote a spouse to a concubine
visit_liege_interaction = {
	category = interaction_category_harem
	use_diplomatic_range = no
	icon = icon_marriage

	desc = visit_liege_interaction_desc #Check

	is_shown = {
		scope:actor = {
			exists = court_owner
			is_consort_of = court_owner
			court_owner = {
				is_available = yes
				highest_held_title_tier >= tier_county
				any_consort = {
					is_available_allow_travelling = yes
					is_courtier_of = scope:actor.court_owner
					count >= 3
				}
				can_be_visited_trigger = yes
			}
			can_be_visited_trigger = yes
			NOR = {
				exists = scope:is_being_divorced
				exists = scope:is_being_set_aside
			}
		}
		OR = {
			scope:actor = scope:recipient
			scope:recipient = scope:actor.court_owner
		}
	}

	is_valid_showing_failures_only = {
		scope:recipient = { is_available_allow_travelling = yes }
		scope:actor = { is_available_allow_travelling = yes }
	}

	auto_accept = yes

	on_accept = {
		custom_tooltip = visit_liege_interaction_effect_tooltip
		scope:actor = {
			save_scope_as = consort
			court_owner = {
				save_scope_as = harem_liege
			}
			random = {
				
			}
		}
		#scope:recipient = {
		#	save_scope_as = homage_authority
		#	trigger_event = {
		#		id = consort_play.0002
		#		days = 3
		#	}
		#}
	}
	
	# AI
	ai_will_do = {
		base = 0
	}
}

pay_respects_interaction = {
	category = interaction_category_harem
	use_diplomatic_range = no
	icon = icon_marriage

	desc = divorce_character_interaction_desc #Check

	is_shown = {
		scope:actor = {
			exists = court_owner
			court_owner = {
				highest_held_title_tier >= tier_county
				any_consort = {
					is_available_allow_travelling = yes
					is_courtier_of = scope:actor.court_owner
					count >= 3
				}
			}
			OR = {
				AND = { # Concubines can pay respects to any spouse
					is_concubine_of = court_owner
					court_owner = {
						any_consort = {
							is_available_allow_travelling = yes
							is_courtier_of = prev
							OR = {
								is_spouse_of = prev
								#has_court_position = grand_consort_court_position
							}
							NOT = {
								this = scope:actor
							}
						}
					}
				}
				AND = { # Secondary spouses can pay respects to the PS or the GC
					is_spouse_of = court_owner
					court_owner = {
						any_consort = {
							is_available_allow_travelling = yes
							is_courtier_of = prev
							OR = {
								AND = {
									exists = prev.primary_spouse
									is_spouse_of = prev.primary_spouse
								}
								#has_court_position = grand_consort_court_position
							}
							NOT = {
								this = scope:actor
							}
						}
					}
				}
			}
		}
		scope:recipient = {
			this = scope:actor
		}


	#	scope:actor = {
	#		is_ai = no
	#
	#		exists = court_owner
	#		court_owner = {
	#			any_consort = {
	#				this = scope:actor
	#			}
	#			any_consort = {
	#				count >= 3
	#			}
	#		}
	#
	#		exists = court_owner.primary_spouse
	#			NOT = {
	#			this = court_owner.primary_spouse
	#		}
	#	
	#		any_consort = {
	#			count = 1
	#		}
	#	}
	#	scope:recipient = {
	#	
	#		exists = court_owner.primary_spouse
	#		this = court_owner.primary_spouse
	#
	#		exists = court_owner
	#		court_owner = {
	#			any_consort = {
	#				this = scope:actor
	#			}
	#			any_courtier = {
	#				this = scope:actor
	#			}
	#		}
	#		NOT = {
	#			this = scope:actor
	#		}
	#	}
	}

	is_valid_showing_failures_only = {
		#scope:recipient = { is_available_allow_travelling = yes }
		scope:actor = { is_available_allow_travelling = yes }
	}

	auto_accept = yes

	on_accept = {
		custom_tooltip = pay_respects_decision_effect_tooltip
		scope:actor = {
			save_scope_as = homage_subordinate
			court_owner = {
				save_scope_as = harem_liege
			}
			trigger_event = {
				id = consort_play.0004
				days = { 5 10 }
			}
		}
		#scope:recipient = {
		#	save_scope_as = homage_authority
		#	trigger_event = {
		#		id = consort_play.0002
		#		days = 3
		#	}
		#}
	}
	
	# AI
	ai_will_do = {
		base = 0
	}
}